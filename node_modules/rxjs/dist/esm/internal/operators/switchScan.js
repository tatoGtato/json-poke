import { switchMap } from './switchMap';
import { Observable } from '../Observable';
import { operate } from '../Subscriber';
export function switchScan(accumulator, seed) {
    return (source) => new Observable((destination) => {
        let state = seed;
        switchMap((value, index) => accumulator(state, value, index))(source).subscribe(operate({
            destination,
            next: (innerValue) => {
                state = innerValue;
                destination.next(innerValue);
            },
        }));
        return () => {
            state = null;
        };
    });
}
//# sourceMappingURL=switchScan.js.map