{
  "version": 3,
  "sources": ["../../@open-cells/page-controller/src/PageController.js"],
  "sourcesContent": ["/*\n * Copyright 2024 Bilbao Vizcaya Argentaria, S.A.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ElementController } from '@open-cells/element-controller';\n\nexport class PageController extends ElementController {\n  static get BRIDGE_PAGE_PRIVATE_CHANNEL_PREFIX() {\n    return '__oc_page_';\n  }\n\n  static getPagePrivateChannel(tagName) {\n    return `${PageController.BRIDGE_PAGE_PRIVATE_CHANNEL_PREFIX}${tagName.toLowerCase().replace('-page', '')}`;\n  }\n\n  // Declare properties\n  static get properties() {\n    return {\n      params: { type: Object },\n    };\n  }\n\n  // Initialize properties\n  constructor(host) {\n    super(host);\n    this.params = {};\n  }\n\n  hostConnected() {\n    super.hostConnected();\n    this.__handleConnections();\n  }\n\n  __handleConnections() {\n    if (this.__hasPageHandlers()) {\n      this.__handlePagePrivateChannel();\n    }\n  }\n\n  __hasPageHandlers() {\n    return !!this.host.onPageEnter || !!this.host.onPageLeave;\n  }\n\n  __handlePagePrivateChannel() {\n    const channelName = PageController.getPagePrivateChannel(this.host.tagName);\n    const wrappedPrivateChannelCallback = this.__wrapPrivateChannelCallback();\n\n    this.subscribe(channelName, wrappedPrivateChannelCallback);\n  }\n\n  __wrapPrivateChannelCallback() {\n    return ({ value: pageStatusValue }) => {\n      const callback = () => {\n        if (pageStatusValue) {\n          this.host.onPageEnter && this.host.onPageEnter();\n        } else {\n          this.host.onPageLeave && this.host.onPageLeave();\n        }\n      };\n\n      if (callback) {\n        callback();\n      }\n    };\n  }\n}\n"],
  "mappings": ";;;;;;;AAkBO,IAAM,iBAAN,MAAM,wBAAuB,kBAAkB;AAAA,EACpD,WAAW,qCAAqC;AAC9C,WAAO;AAAA,EACT;AAAA,EAEA,OAAO,sBAAsB,SAAS;AACpC,WAAO,GAAG,gBAAe,kCAAkC,GAAG,QAAQ,YAAY,EAAE,QAAQ,SAAS,EAAE,CAAC;AAAA,EAC1G;AAAA;AAAA,EAGA,WAAW,aAAa;AACtB,WAAO;AAAA,MACL,QAAQ,EAAE,MAAM,OAAO;AAAA,IACzB;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,MAAM;AAChB,UAAM,IAAI;AACV,SAAK,SAAS,CAAC;AAAA,EACjB;AAAA,EAEA,gBAAgB;AACd,UAAM,cAAc;AACpB,SAAK,oBAAoB;AAAA,EAC3B;AAAA,EAEA,sBAAsB;AACpB,QAAI,KAAK,kBAAkB,GAAG;AAC5B,WAAK,2BAA2B;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,WAAO,CAAC,CAAC,KAAK,KAAK,eAAe,CAAC,CAAC,KAAK,KAAK;AAAA,EAChD;AAAA,EAEA,6BAA6B;AAC3B,UAAM,cAAc,gBAAe,sBAAsB,KAAK,KAAK,OAAO;AAC1E,UAAM,gCAAgC,KAAK,6BAA6B;AAExE,SAAK,UAAU,aAAa,6BAA6B;AAAA,EAC3D;AAAA,EAEA,+BAA+B;AAC7B,WAAO,CAAC,EAAE,OAAO,gBAAgB,MAAM;AACrC,YAAM,WAAW,MAAM;AACrB,YAAI,iBAAiB;AACnB,eAAK,KAAK,eAAe,KAAK,KAAK,YAAY;AAAA,QACjD,OAAO;AACL,eAAK,KAAK,eAAe,KAAK,KAAK,YAAY;AAAA,QACjD;AAAA,MACF;AAEA,UAAI,UAAU;AACZ,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
